<!DOCTYPE html>
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>installation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<div id="Archlinux-installaton"><h4 id="Archlinux-installaton">Archlinux-installaton</h4></div>
<ol>
<li>
更新系统时钟
<pre>
timedatectl set-ntp true
</pre>

<li>
磁盘分区
<pre>
分区规划：/:30G  /boot:200M  swap:10G  /home:剩余
n +30G		(/dev/sda1)
n +200M		(/dev/sda2)
n +10G		(/dev/sda3)
n ..		(/dev/sda4)
</pre>

<li>
格式化分区
<pre>
磁盘分区：
mkfs.ext4 /dev/sda1[sda3 sda4]
交换分区：
mkswap /dev/sda2
swapon /dev/sda2
</pre>

<li>
挂载文件系统
<pre>
mount /dev/sda1 /mnt

mkdir /mnt/boot
mount /dev/sda3 /mnt/boot

mkdir /mnt/home
mount /dev/sda4 /mnt/home
</pre>

<li>
安装基本程序组
<pre>
修改文件：/etc/pacman.d/mirrorlist (把所有中国的源地址移到最前面)
pacstrap /mnt base
</pre>

<li>
生成磁盘挂载信息文件fstab，便于开机自动挂载，避免再次手动挂载(步骤4)
<pre>
genfstab -U /mnt &gt;&gt; /mnt/etc/fstab
</pre>

<li>
以root用户配置新系统
<pre>
arch-chroot /mnt
</pre>

<ol>
<li>
时区配置
<pre>
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
</pre>

<li>
语言环境配置
<pre>
修改文件：/etx/locale.gen: 去注释 en_US.UTF-8 UTF-8 这一行
环境生成：locale-gen
配置全局环境：
	编辑文件 /etc/locale.conf 添加 LANG=en_US.UTF-8
</pre>

<li>
系统名称配置
<pre>
/etc/hostname: ArchLinux
</pre>

<li>
系统名称与IP对应（局域网中的域名）
<pre>
/etc/hosts: 127.0.1.1 ArchLinux.localdomain ArchLinux
</pre>

<li>
网络配置
<pre>
pacman -S networkmanager
pacman -S network-manager-applet
pacman -S xfce4-notifyd
pacman -S gnome-keyring
pacman -S dialog

systemctl enable NetworkManager
</pre>

<li>
用户配置
<pre>
修改root密码： passwd
添加用户：useradd -m -g users -s /bin/bash jett
修改jett密码： passwd jett

pacman -S sudo
pacman -S bash-completion

/etc/sudoers：jett ALL=(ALL) ALL
</pre>

<li>
引导程序制作
<pre>
pacman -S grub-bios
pacman -S intel-ucode

grub-install --recheck /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg
</pre>

<li>
退出系统配置
<pre>
exit
umount -R /mnt
reboot
</pre>

</ol>
<li>
以root用户重新登录后，安装桌面环境
<pre>
pacman -S xfce4
pacman -S xfce4-goodies
pacman -S xorg
pacman -S xorg-utils
pacman -S xorg-server-utils
pacman -S xorg-apps
{显卡驱动：pacman -S xf86-videl-intel，经安装，不需要该步骤}
</pre>

<li>
桌面环境登录配置文件
<pre>
两个文件：.xserverrc .xinitrc (每个用户目录中都要有这两个文件，所以要拷贝一份到非root用户目录下)

.xserverrc:
#!/bin/sh
exec /usr/bin/Xorg -nolisten tcp "$@" vt$XDG_VINR

.xinitrc:
cp /etc/X11/xinit/xinitrc ~/.xinitrc
修改.xinitrc：exec startxfce4 (注释掉最后一行的exec)
</pre>

<li>
登录管理器配置
<pre>
pacman -S slim
systemctrl enable slim.service
</pre>

<li>
登录桌面环境
<pre>
reboot
登录相应的用户即可
</pre>

<li>
音频驱动安装
<pre>
pacman -S alsa-utils
pacman -S alsa-firmware
pacman -S alsa-plugins

音量调节快捷键设置：
升音：amixer set Master 5%+
降音：amixer set Master 5%-
静音：amixer set Master toggle
</pre>

<li>
中文输入法安装
<pre>
配置cn软件源：/etc/pacman.conf:
[archlinuxcn]
SigLevel = Optional TrustAll
Server = http://mirrors.ustc.edu.cn/archlinuxcn/$arch

pacman -Syy
pacman -S archlinuxcn-keyring

输入法管理器：
pacman -S fcitx-im
pacman -S fcitx-configtool
搜狗拼音输入法：
pacman -S fcitx-sogoupinyin
</pre>

<li>
浏览器安装
<pre>
中文字体安装：
pacman -S adobe-source-han-sans-cn-fonts

chromium浏览器：
pacman -S chromium
pacman -S pepper-flash
</pre>

</ol>

</body>
</html>
